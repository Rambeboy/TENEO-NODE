const _0x5d3a85=_0x2c82;(function(_0x27c3de,_0x1c9286){const _0x24a190=_0x2c82,_0x5e2040=_0x27c3de();while(!![]){try{const _0x1614ae=-parseInt(_0x24a190(0x17e))/0x1*(parseInt(_0x24a190(0x155))/0x2)+parseInt(_0x24a190(0x152))/0x3+parseInt(_0x24a190(0x168))/0x4+parseInt(_0x24a190(0x175))/0x5+parseInt(_0x24a190(0x17f))/0x6*(parseInt(_0x24a190(0x16d))/0x7)+-parseInt(_0x24a190(0x15d))/0x8+-parseInt(_0x24a190(0x166))/0x9*(-parseInt(_0x24a190(0x145))/0xa);if(_0x1614ae===_0x1c9286)break;else _0x5e2040['push'](_0x5e2040['shift']());}catch(_0x221956){_0x5e2040['push'](_0x5e2040['shift']());}}}(_0x2b63,0x46980));import{HttpsProxyAgent}from'https-proxy-agent';import{SocksProxyAgent}from'socks-proxy-agent';import{Helper}from'../utils/helper.js';import{API}from'./api/api.js';import _0x509e2e from'../utils/logger.js';function _0x2b63(){const _0x1e3995=['login','error','data','refreshToken','Error\x20in\x20connectWebSocket:\x20','720XYvecN','POST','startPing','maxwssReconnectAttempts','Sending\x20PING\x20','stopPing','connectWebSocket','pointsTotal','Error\x20processing\x20WebSocket\x20message:\x20','WebSocket\x20connection\x20closed\x20unexpectedly.','Try\x20to\x20login...','OPEN','send','255726BKExyb','Error\x20during\x20WebSocket\x20onerror\x20handling:\x20','WebSocket\x20connection\x20opened.','298990aAKfMo','reconnectWebSocket','acc','&version=v0.2','GET','socket','point','handleError','1692352qeDlpT','onopen','onerror','access_token','Error\x20in\x20reconnectWebSocket:\x20','WebSocket\x20error:\x20','sendPing','pointsToday','message','33498tUMVMJ','https://ikknngrgxuxgjhplbpey.supabase.co','1002504HgduZH','Error\x20during\x20WebSocket\x20onclose\x20handling:\x20','http','delay','pingInterval','710563nPqbgn','socketURL','email','WebSocket\x20connection\x20closed\x20cleanly.','refresh_token','status','wssReconnectAttempts','user','1219100emHYmu','wss://secure.ws.teneo.pro/websocket?userId=','/auth/v1/token?grant_type=password','Getting\x20User\x20Information...','getUser','onmessage','Starting\x20PING\x20interval,\x20Ping\x20will\x20be\x20send\x20every\x2010\x20Seconds','onclose','pingCount','3QmnWRy','6YCAQsW','stringify','min','Received\x20message:\x20','proxy',')...','PING','Attempting\x20to\x20reconnect\x20(#','info'];_0x2b63=function(){return _0x1e3995;};return _0x2b63();}import _0x583ea0 from'ws';function _0x2c82(_0x4246bf,_0x171f79){const _0x2b6352=_0x2b63();return _0x2c82=function(_0x2c82ba,_0x2da405){_0x2c82ba=_0x2c82ba-0x143;let _0x13075a=_0x2b6352[_0x2c82ba];return _0x13075a;},_0x2c82(_0x4246bf,_0x171f79);}export default class Core extends API{constructor(_0xb204bb,_0x4fa21f){const _0x1d155c=_0x2c82;super(_0x1d155c(0x167),_0x4fa21f),this[_0x1d155c(0x157)]=_0xb204bb,this[_0x1d155c(0x15a)]=null,this[_0x1d155c(0x173)]=0x0,this[_0x1d155c(0x148)]=0x5,this['pingInterval']=0x0,this[_0x1d155c(0x15b)]={'pointsToday':0x0,'pointsTotal':0x0},this[_0x1d155c(0x17d)]=0x0;}async[_0x5d3a85(0x188)](){const _0x444bbf=_0x5d3a85;await Helper[_0x444bbf(0x16b)](0x3e8,this['acc'],_0x444bbf(0x14f),this);const _0x2f8599=await this['fetch'](_0x444bbf(0x177),_0x444bbf(0x146),undefined,{'email':this[_0x444bbf(0x157)][_0x444bbf(0x16f)],'password':this[_0x444bbf(0x157)]['password'],'gotrue_meta_security':{}});_0x2f8599[_0x444bbf(0x172)]==0xc8?(this['token']=_0x2f8599[_0x444bbf(0x160)],this[_0x444bbf(0x143)]=_0x2f8599[_0x444bbf(0x171)],this[_0x444bbf(0x174)]=_0x2f8599[_0x444bbf(0x174)]):this[_0x444bbf(0x15c)](_0x2f8599);}async[_0x5d3a85(0x179)](){const _0x4dc552=_0x5d3a85;await Helper['delay'](0x3e8,this['acc'],_0x4dc552(0x178),this);const _0x41742d=await this['fetch']('/auth/v1/user',_0x4dc552(0x159),this['token']);_0x41742d['status']==0xc8?this['user']=_0x41742d:this[_0x4dc552(0x15c)](_0x41742d);}async[_0x5d3a85(0x14b)](){const _0xd257f=_0x5d3a85;let _0x5acf7b;try{this['proxy']&&(this[_0xd257f(0x183)]['startsWith'](_0xd257f(0x16a))&&(_0x5acf7b=new HttpsProxyAgent(this['proxy'])),this[_0xd257f(0x183)]['startsWith']('socks')&&(_0x5acf7b=new SocksProxyAgent(this['proxy']))),this[_0xd257f(0x16e)]=_0xd257f(0x176)+this[_0xd257f(0x174)]['id']+_0xd257f(0x158),this['socket']=new _0x583ea0(this[_0xd257f(0x16e)],{'agent':_0x5acf7b}),this[_0xd257f(0x15a)][_0xd257f(0x15e)]=async()=>{const _0x1d92a4=_0xd257f;try{await Helper[_0x1d92a4(0x16b)](0x1f4,this[_0x1d92a4(0x157)],_0x1d92a4(0x154),this),this['wssReconnectAttempts']=0x0;}catch(_0x4ef550){_0x509e2e['error']('Error\x20during\x20WebSocket\x20onopen:\x20'+_0x4ef550);throw _0x4ef550;}},this[_0xd257f(0x15a)][_0xd257f(0x17a)]=async _0x411f71=>{const _0x7da22a=_0xd257f;try{const _0x16a1d1=JSON['parse'](_0x411f71[_0x7da22a(0x18a)]);_0x509e2e[_0x7da22a(0x187)](_0x411f71[_0x7da22a(0x18a)]),await Helper['delay'](0x7d0,this[_0x7da22a(0x157)],_0x7da22a(0x182)+_0x16a1d1[_0x7da22a(0x165)],this),_0x16a1d1[_0x7da22a(0x164)]&&(this['point']={'pointsToday':_0x16a1d1['pointsToday'],'pointsTotal':_0x16a1d1[_0x7da22a(0x14c)]},await Helper[_0x7da22a(0x16b)](0x3e8,this[_0x7da22a(0x157)],'User\x20Point\x20Updated',this)),this[_0x7da22a(0x147)]();}catch(_0x3dc6de){_0x509e2e[_0x7da22a(0x189)](_0x7da22a(0x14d)+_0x3dc6de);throw _0x3dc6de;}},this[_0xd257f(0x15a)][_0xd257f(0x15f)]=async _0x2df30b=>{const _0x23d32a=_0xd257f;try{await Helper[_0x23d32a(0x16b)](0x1f4,this[_0x23d32a(0x157)],_0x23d32a(0x162)+_0x2df30b,this);}catch(_0x5ba263){_0x509e2e[_0x23d32a(0x189)](_0x23d32a(0x153)+_0x5ba263);throw _0x5ba263;}},this[_0xd257f(0x15a)][_0xd257f(0x17c)]=async _0x9bbcf7=>{const _0x558007=_0xd257f;try{_0x9bbcf7['wasClean']?await Helper[_0x558007(0x16b)](0x1f4,this[_0x558007(0x157)],_0x558007(0x170),this):await Helper[_0x558007(0x16b)](0x1f4,this[_0x558007(0x157)],_0x558007(0x14e),this),await this[_0x558007(0x14a)](),await this[_0x558007(0x156)]();}catch(_0x44f1e5){_0x509e2e['error'](_0x558007(0x169)+_0x44f1e5);throw _0x44f1e5;}};}catch(_0x162b4c){_0x509e2e[_0xd257f(0x189)](_0xd257f(0x144)+_0x162b4c);throw _0x162b4c;}}async[_0x5d3a85(0x156)](){const _0x223bf8=_0x5d3a85;try{if(this[_0x223bf8(0x173)]<this[_0x223bf8(0x148)]){this[_0x223bf8(0x173)]+=0x1;const _0x113afc=Math[_0x223bf8(0x181)](0x1388,0x3e8*this[_0x223bf8(0x173)]);await Helper[_0x223bf8(0x16b)](_0x113afc,this['acc'],_0x223bf8(0x186)+this[_0x223bf8(0x173)]+_0x223bf8(0x184),this),await this[_0x223bf8(0x14b)]();}else await Helper[_0x223bf8(0x16b)](0x3e8,this[_0x223bf8(0x157)],'Max\x20reconnect\x20attempts\x20reached.\x20Could\x20not\x20reconnect\x20to\x20WebSocket.',this);}catch(_0x46c19f){_0x509e2e[_0x223bf8(0x189)](_0x223bf8(0x161)+_0x46c19f);throw _0x46c19f;}}async[_0x5d3a85(0x163)](){const _0x9b8ee5=_0x5d3a85;this['pingCount']=this[_0x9b8ee5(0x17d)]+0x1,await Helper[_0x9b8ee5(0x16b)](0x0,this[_0x9b8ee5(0x157)],_0x9b8ee5(0x149)+this['pingCount'],this),this[_0x9b8ee5(0x15a)][_0x9b8ee5(0x151)](JSON[_0x9b8ee5(0x180)]({'type':_0x9b8ee5(0x185)})),await Helper[_0x9b8ee5(0x16b)](0x2710,this[_0x9b8ee5(0x157)],'PING\x20'+this['pingCount']+'\x20Sended',this);}async['startPing'](){const _0x543c1e=_0x5d3a85;!this['pingInterval']&&(await Helper[_0x543c1e(0x16b)](0x0,this['acc'],_0x543c1e(0x17b),this),this[_0x543c1e(0x16c)]=setInterval(async()=>{const _0x2e442f=_0x543c1e;this[_0x2e442f(0x15a)]&&this[_0x2e442f(0x15a)]['readyState']===_0x583ea0[_0x2e442f(0x150)]&&await this[_0x2e442f(0x163)]();},0x2710));}async['stopPing'](){const _0x1b9896=_0x5d3a85;this[_0x1b9896(0x16c)]&&(clearInterval(this[_0x1b9896(0x16c)]),this[_0x1b9896(0x16c)]=null);}async[_0x5d3a85(0x15c)](_0x13a48a){throw _0x13a48a;}}